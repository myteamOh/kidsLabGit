<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.kidslab.client.inquiry.dao.InquiryDAO">

	<!-- 1:1 문의 조회 -->
	<select id="inquiryList" parameterType="String" resultType="inquiry">

		Select
		INQUIRY_NO,
		PARENT_NO,
		INQUIRY_TITLE,
		INQUIRY_CONTENT,
		to_char(INQUIRY_REGISTERDATE, 'YYYY-MM-DD')as INQUIRY_REGISTERDATE
		from
		BOARD_INQUIRY

	</select>

	<!-- 상세 페이지를 위한 게시물 조회 -->
	<select id="inquiryDetail" parameterType="int" resultType="inquiry">

		Select
		INQUIRY_NO,
		PARENT_NO,
		INQUIRY_TITLE,
		INQUIRY_CONTENT,
		to_char(INQUIRY_REGISTERDATE, 'YYYY-MM-DD')as INQUIRY_REGISTERDATE
		from
		BOARD_INQUIRY
		where
		INQUIRY_NO = #{INQUIRY_NO}
	</select>


	<!-- 게시물 등록 -->
	<insert id="inquiryInsert" parameterType="inquiry">
		<selectKey keyProperty="INQUIRY_NO" resultType="int" order="BEFORE">
			select BOARD_INQUIRY_SEQ.nextval from dual
		</selectKey>
		Insert into BOARD_INQUIRY (
		INQUIRY_NO,
		PARENT_NO,
		INQUIRY_TITLE,
		INQUIRY_CONTENT,
		INQUIRY_REGISTERDATE
		) values(
		#{INQUIRY_NO},
		#{PARENT_NO},
		#{INQUIRY_TITLE},
		#{INQUIRY_CONTENT},
		SYSDATE

		)

	</insert>

	<!-- 게시물 수정 -->
	<update id="inquiryUpdate" parameterType="inquiry">
		<selectKey keyProperty="INQUIRY_NO" resultType="int" order="BEFORE">
			select BOARD_INQUIRY_SEQ.nextval from dual
		</selectKey>
		Update BOARD_INQUIRY
		SET INQUIRY_TITLE = #{INQUIRY_TITLE},
		INQUIRY_CONTENT = #{INQUIRY_CONTENT},
		INQUIRY_REGISTERDATE = SYSDATE

		where INQUIRY_NO = #{INQUIRY_NO}
		)

	</update>

	<!-- 게시물 삭제 -->



</mapper>